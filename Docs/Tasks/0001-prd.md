# 0001 – PRD – Week 1: Project Skeleton & First-Person Office Basics

## 1. Introduction / Overview

This PRD defines the requirements for **Week 1** of development for _Fallen Compass_.

Week 1’s goal is to create a **working Unreal Engine 5.7 C++ project skeleton** and a **first-person office prototype** that matches the GDD’s “small office, first-person” perspective. At the end of Week 1, the developer should be able to:

- Launch the game into a **placeholder office level**.
- Move around the office in **first person** using WASD + mouse look.
- Interact with the **table** to focus the camera on it and return with ESC.
- Interact with the **door** to return to the Main Menu level.
- Use **ESC** to open a **pause menu** (from first person) with “Quit” and “Back to Main Menu”.
- Quit back to a basic **Main Menu** or exit the game.

This milestone establishes the technical foundation (project, base classes, Git) on which all later features will be built.

---

## 2. Goals

1. Have a **clean UE 5.7 C++ project** set up with Git and basic branching strategy.
2. Implement base game framework classes (`GameInstance`, `GameMode`, `PlayerController`) as custom, extendable types using the **FC** prefix.
3. Implement a **first-person player pawn** with WASD movement and mouse look.
4. Create a **placeholder office level** that the player can walk around in, including an **interactable table** and an **interactable door**.
5. Implement a simple **Main Menu level** with **Start** and **Quit**.
6. Implement the **Office interaction flow**:
   - Interact with table → camera pan/zoom to table.
   - ESC from table view → return to first-person view.
   - ESC from first-person → open pause menu with “Quit” and “Back to Main Menu”.
   - Interact with door → return to Main Menu level.

---

## 3. User Stories

> “User” = player; “Dev” = solo developer.

1. **As a developer**, I want a clean UE 5.7 C++ project with source control, so that I can safely iterate without breaking my entire codebase.
2. **As a developer**, I want custom base classes for GameInstance, GameMode, and PlayerController (with FC prefix), so that I can plug in later systems (office, Overworld, combat) without refactoring engine defaults.
3. **As a player**, I want to start the game and appear in a small office in first-person view, so that I immediately understand the core perspective of the “office” layer.
4. **As a player**, I want to move around the office with WASD and look around with the mouse, so that I can freely explore and inspect the environment.
5. **As a player**, I want to interact with the **table** and have the camera pan/zoom onto it, so it feels like I am leaning in to inspect or use it.
6. **As a player**, I want to press **ESC** while looking at the table to return to my normal first-person camera.
7. **As a player**, I want to press **ESC** from first person to open a **pause menu** with options to continue, go back to the Main Menu, or quit the game.
8. **As a player**, I want to interact with the **door** in the office to leave the room and return to the Main Menu level.

---

## 4. Functional Requirements

### 4.1 Project & Tooling Setup

**FR-1** – UE Project Creation

- The system **must** provide a UE 5.7 project using C++ as the primary code base.
- Project settings must be appropriate for:
  - **Windows PC** as the primary target.
  - **Linux/macOS** build targets **enabled**, but not actively tested in Week 1 (testing on Linux/macOS happens at the end of phases).

**FR-2** – Source Control Setup

- The system **must** use Git for source control.
- A `.gitignore` file **must** be configured for Unreal Engine projects (intermediate, binaries, derived data, etc.).
- A basic branching convention (e.g., `main` + `feature/*`) should be documented in a short `README`.

**FR-3** – Base Game Classes (FC Prefix)

- The project **must** define:
  - A custom `UGameInstance` subclass, e.g. `UFCGameInstance`, for global state later (expeditions, settings, save system).
  - A custom `AGameModeBase` subclass, e.g. `AFCGameMode`, used by the Office level.
  - A custom `APlayerController` subclass, e.g. `AFCPlayerController`, used by the Office level.
- The Office level **must** use the custom `AFCGameMode` and `AFCPlayerController`.

---

### 4.2 First-Person Controller, Office Level & Interactions

**FR-4** – First-Person Pawn

- The system **must** implement a first-person character pawn, e.g. `AFCFirstPersonCharacter`, with:
  - WASD movement on a flat surface.
  - Mouse-controlled camera rotation (yaw/pitch).
  - Proper collision with walls/floor to avoid falling out of the level.

**FR-5** – Input Mapping

- The project **must** set up input mappings for:
  - `MoveForward` / `MoveBackward`
  - `MoveRight` / `MoveLeft`
  - `Turn` (mouse X)
  - `LookUp` (mouse Y)
  - `Interact` (e.g. `E` or left-click while looking at an object)
  - `Pause` / `ESC`
- Default keybindings:
  - W/S/A/D for movement.
  - Mouse movement for look.
  - ESC for pause / back.
  - E (or another chosen key) for interaction.

**FR-6** – Placeholder Office Level

- The system **must** include a simple “Office” level:
  - A closed room (floor, ceiling, four walls) sized big enough to walk around comfortably.
  - A clear starting spawn point for the player.
  - At least one visible “desk/table” prop (can be a simple cube) to indicate where the map table will eventually be.
  - A visible **door** prop that will serve as the exit point to the Main Menu level.

**FR-7** – Game Flow: Main Menu → Office Level (Dedicated Menu Level)

- On game start, the system **must** load a **dedicated Main Menu level**, not the office directly.
- The Main Menu level must:
  - Use a simple 3D or static background (can be very minimal in Week 1).
  - Display a UMG-based menu with:
    - “Start Game” button → loads the Office level and spawns `AFCFirstPersonCharacter`.
    - “Quit Game” button → exits the application.

**FR-8** – Office Interactions: Door & Pause Menu

- The Office level **must** support:
  - An **interactable door**:
    - When the player is in first-person view and activates **Interact** on the door, the game **must load the Main Menu level**.
  - A **pause menu** from first-person:
    - When the player is in **first-person camera mode** (not in table view) and presses **ESC**, open a pause menu.
    - The pause menu **must** contain:
      - “Resume” → close the pause menu and return to the office.
      - “Back to Main Menu” → load the Main Menu level.
      - “Quit Game” → exit the application.

**FR-9** – Office Interactions: Table & Camera Behaviour

- The Office level **must** support:
  - An **interactable table**:
    - When the player is in first-person and uses **Interact** on the table, the camera must **pan/zoom to a table-focused view**.
      - This can be implemented as:
        - Switching to a table camera with an animated blend, or
        - Moving the current camera to a target transform.
    - While in the **table-focused view**:
      - Player movement is disabled.
      - Pressing **ESC** must:
        1. First, **return the camera to the first-person view** (normal `AFCFirstPersonCharacter` camera).
        2. Not immediately open the pause menu.
  - From **first-person view only**:
    - Pressing ESC opens the **pause menu** as described in FR-8.

---

## 5. Security Requirements

**SR-1** – Secrets & Credentials

- No hard-coded secrets, API keys, or credentials should be committed to the repository.
- If any future services are configured, use environment variables or config files ignored by Git.

**SR-2** – Repository Hygiene

- `.gitignore` must exclude:
  - `Binaries/`, `Intermediate/`, `DerivedDataCache/`, `Saved/` (except config).
- No large, auto-generated binary files should be manually committed unless strictly necessary.

**SR-3** – Local-Only Access

- The project at this stage is **local-only**.
- No networked features, online services, or user account systems should be implemented in Week 1.

**SR-4** – Engine & Plugin Trust

- Only official Unreal Engine 5.7 and trusted marketplace plugins are allowed.
- No random third-party binaries or .dlls from unverified sources should be added.

---

## 6. Non-Goals (Out of Scope for Week 1)

- No **map table UI** yet (no world map, no route planning).
- No **Overworld gameplay**, no convoy, no Top-Down camera.
- No **camp scenes, combat, or route planning**.
- No **save/load system** beyond default engine behavior.
- No **final art, materials, or lighting** – Week 1 is purely functional (greybox).
- No **complex options menus** (graphics, keybindings) beyond UE defaults.

---

## 7. Design Considerations

- **Naming conventions**

  - All custom project classes follow the **FC prefix**:
    - `UFCGameInstance`, `AFCGameMode`, `AFCPlayerController`, `AFCFirstPersonCharacter`, etc.

- **Menu approach**

  - Use a **dedicated Main Menu level**:
    - Clean separation between meta UI and in-world office logic.
    - The door in the office returns to this Main Menu level.
    - The pause menu from office is a UI overlay, _not_ a different level.

- **Camera behaviour**

  - Table interaction:
    - Feel like the player “leans in” to the table: smooth camera pan and zoom.
    - ESC acts as “step back” to first-person.
  - Only in first-person camera mode should ESC open the **pause menu**.

- **Office layout**
  - The Office room should:
    - Convey a small, contained space.
    - Leave enough room to walk and turn without motion sickness.
    - Have clear visual placement for the table and door so the interactions are discoverable.

---

## 8. Technical Considerations

- **Engine Version:** Unreal Engine **5.7** (C++ project).
- **Target Platforms:**
  - **Windows PC** – primary development and testing target during Week 1.
  - **Linux/macOS** – enabled in project settings, but tested **only at the end of phases**, not weekly.
- **Code Structure:**

  - Base classes in a core module:
    - `UFCGameInstance`
    - `AFCGameMode`
    - `AFCPlayerController`
    - `AFCFirstPersonCharacter`
  - Office interaction logic (table, door, camera, pause menu) implemented cleanly in C++ and/or Blueprints associated with office level and player controller.

- **Blueprint vs C++:**
  - Core framework in **C++**.
  - Interactions, camera transitions, and pause menu may be implemented using Blueprints/UMG for faster iteration.

---

## 9. Success Metrics

Week 1 is successful if all of the following are true:

1. The project **builds and runs** without errors on Windows.
2. On start, the game shows a **Main Menu level** with:
   - “Start Game” button that loads the Office level and spawns `AFCFirstPersonCharacter`.
   - “Quit Game” button that exits the application.
3. In the Office level:
   - The player can move with WASD and look with the mouse.
   - The player can interact with the **table**:
     - Camera pans/zooms into a table-focused view.
     - Pressing ESC returns camera to first-person.
   - The player can press ESC while in **first-person**:
     - A pause menu appears with “Resume”, “Back to Main Menu”, “Quit Game”.
   - The player can interact with the **door**:
     - The game returns to the Main Menu level.
4. From the Main Menu, “Quit Game” exits the app.
5. All code and project files are tracked in Git, with:
   - An initial commit.
   - A clean working tree (no unexpected untracked UE junk).

---

## 10. Open Questions

(For later phases; none block Week 1 now.)

1. Final visual style and composition of the office.
2. Final visual style and composition of the main menu.
3. Whether the table camera view becomes interactive (e.g. world map UI) later – for now it’s pure camera framing.
